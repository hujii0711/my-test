<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script>

   //console.log("1");
   //fetch("https://jsonplaceholder.typicode.com/posts")
   //   .then(function(response){
   //        return response.json();
   //   })
   //   .then(function(data){
   //        console.log(data);
   //});
   //console.log("2");
   
   //var fetched = fetch("https://jsonplaceholder.typicode.com/posts");
   //console.log(fetched); //리턴객체 Promise :비동기적으로 사용하는 함수일 가능성이 매우끔
   //fetched.then(function(result){
   //   console.log(result);
   //}); //then은 fetch 실행후 성공했을때 호출, 콜백함수의 인자는 성공한 데이터 전달
   //fetched.catch(function(reason){
   //   console.log(reason);
   //});//then은 fetch 실행후 실패했을때 호출, 콜백함수의 인자는 실패한 이유를 전달
    
   fetch("https://jsonplaceholder.typicode.com/posts")
	   //then()의 리턴값도 Promise이기 때문에 함수 체이닝으로 통해 그다음의 then()을 호출할 수 있음
	   .then(function(result){
	       //console.log("result========", result); //result는 Response 객체
	       //console.log("result.json========", result.json()); //result.json() 리턴값도 Promise --> json 컨버팅 작업 끝나면 then을 호출
	       //nested chaing 방법
	       //result.json().then(function(data){
	       //   console.log("data========", data);
	       //})
	       return result.json(); // then()에서 Promise객체를 return하면 다음 then()이 수행됨
	   })
	   //promise chaing 방법 --> 일반적으로 많이 사용됨
	   .then(function(data){
		   console.log("data2========", data);
	   })
       .catch(function(reason){
    	   console.log("reason========", reason);
       });
	
</script>
</head>
<body>
</body>
</html>