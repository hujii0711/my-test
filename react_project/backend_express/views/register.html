<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>{{title}}</title>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="/main.css" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      async function register(){
        try{
          const formData = {
            userId: document.getElementById("join-id").value,
            userPwd: document.getElementById("join-password").value,
            userName: document.getElementById("join-name").value
          };

          const resp = await axios.post('/users/register', formData);
          const code = resp.data.code;

          if(code === "success"){
            alert(resp.data.message);
          }

        }catch(err){
          console.error(err);
        }
      };
    </script>
  </head>
  <body>
    <div class="container">
      <div class="timeline">
        <form id="join-form" action="" method="get" onsubmit="return false">
          <div class="input-group">
            <label for="join-id">아이디</label>
            <input id="join-id" type="text" name="userId" />
          </div>
          <div class="input-group">
            <label for="join-password">비밀번호</label>
            <input id="join-password" type="password" name="userPwd" />
          </div>
          <div class="input-group">
            <label for="join-name">이름</label>
            <input id="join-name" type="text" name="name" />
          </div>
          <button id="test-btn" type="submit" class="btn" onclick="register()">회원가입</button>
        </form>
      </div>
      <footer>
        Made by&nbsp;
        <a href="https://www.naver.com" target="_blank">개발자님</a>
      </footer>
    </div>
  </body>
</html>
